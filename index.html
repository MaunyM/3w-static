<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="manifest" href="/manifest.json"/>
</head>
<body>
Code Barre
<video id="player" controls autoPlay width='320' height='240'></video>
<canvas id="canvas" width='160' height='240'></canvas>
<button id="capture">Capture</button>
<script type="module">

    import QrScanner from './qr-scanner.min.js';

    QrScanner.WORKER_PATH = './qr-scanner-worker.min.js';

    navigator.serviceWorker.register('service-worker.js');

    const player = document.getElementById('player');
    const canvas = document.getElementById('canvas');

    const qrScanner = new QrScanner(player, result => console.log('decoded qr code:',
        window.location = result));
    qrScanner.start();
    /*
    navigator.mediaDevices.getUserMedia({video: true}).then((stream) => {
        player.srcObject = stream;
    });

    document.getElementById('capture').addEventListener('click', () => {
        const context = canvas.getContext('2d');
        context.drawImage(player, 0, 0, canvas.width, canvas.height)
    })*/

</script>
</body>
</html>